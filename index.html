<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Face Touch Monitor - AI-Powered Detection</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Main Video Area -->
        <main class="video-section">
            <div class="video-wrapper" id="videoWrapper">
                <video id="videoElement" autoplay playsinline muted></video>
                <canvas id="overlayCanvas"></canvas>

                <!-- Detection Status Overlay -->
                <div class="detection-overlay" id="detectionOverlay">
                    <div class="detection-status" id="detectionStatus">
                        <span class="status-dot"></span>
                        <span class="status-text">Ready</span>
                    </div>
                </div>

                <!-- Alert Flash -->
                <div class="alert-flash" id="alertFlash"></div>
            </div>

            <!-- Welcome Content (shown before start) -->
            <section class="welcome-content" id="welcomeContent">
                <h1>Face Touch Monitor</h1>
                <p class="tagline">Train yourself to stop touching your face with AI-powered detection</p>

                <div class="features">
                    <div class="feature">
                        <span class="feature-icon">&#128064;</span>
                        <span>Real-time Detection</span>
                    </div>
                    <div class="feature">
                        <span class="feature-icon">&#128274;</span>
                        <span>100% Private</span>
                    </div>
                    <div class="feature">
                        <span class="feature-icon">&#9889;</span>
                        <span>60+ FPS</span>
                    </div>
                </div>

                <p class="description">
                    The CDC recommends avoiding touching your eyes, nose, and mouth.
                    This app uses MediaPipe's advanced AI to detect when your hands approach your face,
                    helping you build better habits. All processing happens locally in your browser.
                </p>

                <button class="btn-primary" id="startButton">
                    <span>Start Monitoring</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                </button>

                <p class="privacy-note">
                    Your camera feed never leaves your device. No data is collected or transmitted.
                </p>
            </section>

            <!-- Loading State -->
            <div class="loading-state" id="loadingState">
                <div class="loader-ring"></div>
                <p>Loading AI models...</p>
                <p class="loader-subtitle">This may take a moment on first load</p>
            </div>
        </main>

        <!-- Dashboard Sidebar -->
        <aside class="dashboard" id="dashboard">
            <div class="dashboard-content">
                <header class="dashboard-header">
                    <h2>Dashboard</h2>
                    <div class="connection-status" id="connectionStatus">
                        <span class="pulse"></span>
                        <span id="statusText">Inactive</span>
                    </div>
                </header>

                <!-- Statistics Section -->
                <section class="stats-section">
                    <h3>Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <span class="stat-value" id="touchCount">0</span>
                            <span class="stat-label">Face Touches</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="lastTouch">--</span>
                            <span class="stat-label">Last Touch</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="touchRate">0.0</span>
                            <span class="stat-label">Per Hour</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="fpsDisplay">--</span>
                            <span class="stat-label">FPS</span>
                        </div>
                    </div>
                </section>

                <!-- Controls Section -->
                <section class="controls-section">
                    <h3>Alerts</h3>

                    <div class="control-group">
                        <label class="toggle-control">
                            <input type="checkbox" id="beepToggle" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Sound alert</span>
                        </label>

                        <label class="toggle-control">
                            <input type="checkbox" id="notifyToggle">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Browser notification</span>
                        </label>

                        <label class="toggle-control">
                            <input type="checkbox" id="visualAlertToggle" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Visual flash</span>
                        </label>
                    </div>

                    <div class="input-group">
                        <label for="alertCooldown">Alert cooldown</label>
                        <div class="input-with-unit">
                            <input type="number" id="alertCooldown" value="3" min="1" max="30">
                            <span class="unit">seconds</span>
                        </div>
                    </div>
                </section>

                <!-- Visualization Section -->
                <section class="controls-section">
                    <h3>Visualization</h3>

                    <div class="control-group">
                        <label class="toggle-control">
                            <input type="checkbox" id="showLandmarks" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Show face mesh</span>
                        </label>

                        <label class="toggle-control">
                            <input type="checkbox" id="showHands" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Show hand tracking</span>
                        </label>

                        <label class="toggle-control">
                            <input type="checkbox" id="showProximity">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Show proximity zones</span>
                        </label>
                    </div>
                </section>

                <!-- Sensitivity Section -->
                <section class="controls-section">
                    <h3>Sensitivity</h3>
                    <div class="slider-control">
                        <input type="range" id="sensitivitySlider" min="50" max="200" value="100">
                        <div class="slider-labels">
                            <span>Less Sensitive</span>
                            <span id="sensitivityValue">100%</span>
                            <span>More Sensitive</span>
                        </div>
                    </div>
                </section>

                <!-- Actions -->
                <section class="actions-section">
                    <button class="btn-secondary" id="resetStats">
                        Reset Statistics
                    </button>
                    <button class="btn-danger" id="stopButton">
                        Stop Monitoring
                    </button>
                </section>

                <!-- Info -->
                <footer class="dashboard-footer">
                    <p>Powered by <a href="https://ai.google.dev/edge/mediapipe/solutions/guide" target="_blank" rel="noopener">MediaPipe</a></p>
                    <p>Built by <a href="https://webrtcHacks.com" target="_blank" rel="noopener">webrtcHacks</a></p>
                    <p><a href="https://github.com/webrtchacks/facetouchmonitor" target="_blank" rel="noopener">View on GitHub</a></p>
                </footer>
            </div>
        </aside>
    </div>

    <!-- Scripts -->
    <script type="module" src="detect.js"></script>
</body>
</html>
